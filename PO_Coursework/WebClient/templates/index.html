<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ—à—É–∫–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞</title>
    <style>
        /* –¶–µ CSS - —Å—Ç–∏–ª—å —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (—â–æ–± –±—É–ª–æ –∫—Ä–∞—Å–∏–≤–æ) */
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .search-box { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex-grow: 1; padding: 10px; font-size: 16px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #results { border-top: 1px solid #ccc; padding-top: 20px; }
        .file-item { background: #f9f9f9; padding: 10px; margin-bottom: 5px; border-radius: 4px; }
    </style>
</head>
<body>

    <h1>üîç –ö—É—Ä—Å–æ–≤–∞ –ü–æ—à—É–∫–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞</h1>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å–ª–æ–≤–æ –¥–ª—è –ø–æ—à—É–∫—É...">
        <button onclick="performSearch()">–ó–Ω–∞–π—Ç–∏</button>
    </div>

    <div id="results"></div>

    <script>
        // –¶–µ JavaScript - –º–æ–∑–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.
        // –í—ñ–Ω –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ Python, –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—á–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.

        async function performSearch() {
            // 1. –ë–µ—Ä–µ–º–æ —Ç–µ–∫—Å—Ç –∑ –ø–æ–ª—è –≤–≤–æ–¥—É
            const word = document.getElementById('searchInput').value;
            const resultsDiv = document.getElementById('results');

            if (!word) {
                alert("–í–≤–µ–¥—ñ—Ç—å —Å–ª–æ–≤–æ!");
                return;
            }

            resultsDiv.innerHTML = "Wait... Searching...";

            try {
                // 2. –°—Ç—É–∫–∞—î–º–æ –¥–æ –Ω–∞—à–æ–≥–æ Python-–ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫–∞ (/search?word=...)
                const response = await fetch(`/search?word=${encodeURIComponent(word)}`);
                
                // 3. –û—Ç—Ä–∏–º—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON (—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤)
                const data = await response.json();

                // 4. –û—á–∏—â–∞—î–º–æ –µ–∫—Ä–∞–Ω —ñ –ø–æ–∫–∞–∑—É—î–º–æ –Ω–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
                resultsDiv.innerHTML = "";
                
                if (data.error) {
                    resultsDiv.innerHTML = `<p style="color:red">–ü–æ–º–∏–ª–∫–∞: ${data.error}</p>`;
                } else if (data.files.length === 0) {
                    resultsDiv.innerHTML = "<p>–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üòî</p>";
                } else {
                    // –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—å –ø–æ –∫–æ–∂–Ω–æ–º—É —Ñ–∞–π–ª—É —ñ –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
                    resultsDiv.innerHTML = `<h3>–ó–Ω–∞–π–¥–µ–Ω–æ —É ${data.files.length} —Ñ–∞–π–ª–∞—Ö:</h3>`;
                    data.files.forEach(filename => {
                        const div = document.createElement('div');
                        div.className = 'file-item';
                        div.textContent = "üìÑ " + filename;
                        resultsDiv.appendChild(div);
                    });
                }
            } catch (err) {
                resultsDiv.innerHTML = "–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ Python —Å–µ—Ä–≤–µ—Ä–æ–º.";
                console.error(err);
            }
        }
    </script>
</body>
</html>